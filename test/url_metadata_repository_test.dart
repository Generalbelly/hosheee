import 'package:flutter_test/flutter_test.dart';
import 'package:hosheee/adapter/gateway/url_metadata/url_metadata_repository.dart';

void main() {
  test("fetchUrlMetadata", () async {
    final urlMetadataRepository = UrlMetadataRepository();
    final urlMetadata = await urlMetadataRepository.get('http://www.so-suke.com/shopdetail/000000001432/', "<html>\n  <head>\n    <title>Peanut Butter Cookies</title>\n    <script type=\"application/ld+json\">\n    {\n      \"@context\": \"https://schema.org/\",\n      \"@type\": \"Recipe\",\n      \"name\": \"Peanut Butter Cookies\",\n      \"image\": [\n        \"https://example.com/photos/1x1/photo.jpg\",\n        \"https://example.com/photos/4x3/photo.jpg\",\n        \"https://example.com/photos/16x9/photo.jpg\"\n      ],\n      \"author\": {\n        \"@type\": \"Person\",\n        \"name\": \"Wendy Darling\"\n      },\n      \"datePublished\": \"2018-03-10\",\n      \"description\": \"This Peanut Butter Cookie recipe is everyone's favorite\",\n      \"prepTime\": \"PT10M\",\n      \"cookTime\": \"PT25M\",\n      \"totalTime\": \"PT35M\",\n      \"recipeCuisine\": \"French\",\n      \"recipeCategory\": \"Cookies\",\n      \"keywords\": \"peanut butter, cookies\",\n      \"recipeYield\": \"24\",\n      \"nutrition\": {\n        \"@type\": \"NutritionInformation\",\n        \"calories\": \"120 calories\"\n      },\n      \"aggregateRating\": {\n        \"@type\": \"AggregateRating\",\n        \"ratingValue\": \"5\",\n        \"ratingCount\": \"18\"\n      },\n      \"recipeIngredient\": [\n        \"2 cups of peanut butter\",\n        \"1/3 cup of sugar\"\n      ],\n      \"recipeInstructions\": [\n        {\n          \"@type\": \"HowToStep\",\n          \"text\": \"Mix together the peanut butter and sugar.\"\n        },\n        {\n          \"@type\": \"HowToStep\",\n          \"text\": \"Roll cookie dough into small balls and place on a cookie sheet.\"\n        },\n        {\n          \"@type\": \"HowToStep\",\n          \"text\": \"Bake for 25 minutes.\"\n        }\n      ],\n      \"video\": {\n        \"@type\": \"VideoObject\",\n        \"name\": \"How to Peanut Butter Cookies\",\n        \"description\": \"This is how you make peanut butter cookies.\",\n        \"thumbnailUrl\": [\n          \"https://example.com/photos/1x1/photo.jpg\",\n          \"https://example.com/photos/4x3/photo.jpg\",\n          \"https://example.com/photos/16x9/photo.jpg\"\n         ],\n        \"contentUrl\": \"http://www.example.com/video123.mp4\",\n        \"embedUrl\": \"http://www.example.com/videoplayer?video=123\",\n        \"uploadDate\": \"2018-02-05T08:00:00+08:00\",\n        \"duration\": \"PT1M33S\",\n        \"interactionStatistic\": {\n          \"@type\": \"InteractionCounter\",\n          \"interactionType\": { \"@type\": \"http://schema.org/WatchAction\" },\n          \"userInteractionCount\": 2347\n        },\n        \"expires\": \"2019-02-05T08:00:00+08:00\"\n       }\n    }\n    </script>\n  </head>\n  <body>\n    <p>\n      Here's how to make peanut butter cookies.\n    </p>\n    <ol>\n      <li>Mix together the peanut butter and sugar.</li>\n      <li>Roll cookie dough into small balls and place on a cookie sheet.</li>\n      <li>Bake for 25 minutes.</li>\n    </ol>\n  </body>\n</html>");
    print(urlMetadata.title);
    print(urlMetadata.description);
    print(urlMetadata.url);
    print(urlMetadata.image);
    print(urlMetadata.lang);
    print(urlMetadata.author);
    print(urlMetadata.publisher);
    print(urlMetadata.video);
  });
}
